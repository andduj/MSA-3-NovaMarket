# Реестр событий Saga-хореографии оформления заказа

## Успешный сценарий

| Этап | Тип события | Название события | Описание |
|------|-------------|------------------|----------|
| Создание заказа | domain | OrderCreated | Заказ создан покупателем |
| Проверка остатков | domain | InventoryChecked | Проверка наличия товаров на складе |
| Резервирование товаров | domain | InventoryReserved | Товары зарезервированы для заказа |
| Готовность к оплате | domain | OrderReadyForPayment | Заказ готов к оплате |
| Инициация платежа | domain | PaymentInitiated | Начало процесса оплаты |
| Успешная оплата | domain | PaymentSucceeded | Платеж успешно обработан |
| Создание заявки на доставку | domain | DeliveryRequested | Заявка отправлена в логистическую службу |
| Подтверждение доставки | domain | DeliveryConfirmed | Логистическая служба подтвердила заявку |
| Обновление статуса заказа | domain | OrderStatusUpdated | Статус заказа обновлен |

## Сценарии ошибок и компенсации

| Этап | Тип события | Название события | Описание |
|------|-------------|------------------|----------|
| Недостаток товаров | failure | InventoryInsufficient | Недостаточно товаров на складе |
| Ошибка резервирования | failure | InventoryReservationFailed | Не удалось зарезервировать товары |
| Ошибка платежа | failure | PaymentFailed | Платеж не прошел |
| Ошибка доставки | failure | DeliveryRequestFailed | Не удалось создать заявку на доставку |
| Таймаут резервирования | timeout | InventoryReservationTimeout | Превышено время ожидания резервирования |
| Таймаут платежа | timeout | PaymentTimeout | Превышено время ожидания платежа |

## Компенсационные действия

| Этап | Тип события | Название события | Описание |
|------|-------------|------------------|----------|
| Отмена резервирования | compensation | InventoryReservationCancelled | Отмена резервирования товаров |
| Возврат средств | compensation | PaymentRefunded | Возврат средств покупателю |
| Отмена заказа | compensation | OrderCancelled | Полная отмена заказа |
| Уведомление об ошибке | compensation | ErrorNotificationSent | Уведомление пользователя об ошибке |

## Дополнительные события

| Этап | Тип события | Название события | Описание |
|------|-------------|------------------|----------|
| Уведомление продавца | domain | SellerNotificationSent | Уведомление продавца о новом заказе |
| Уведомление покупателя | domain | CustomerNotificationSent | Уведомление покупателя о статусе заказа |
| Логирование операции | domain | OperationLogged | Логирование для аудита |
